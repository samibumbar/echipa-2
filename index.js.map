{"version":3,"file":"index.js","sources":["../src/js/movies-default-display.js"],"sourcesContent":["\"use strict\";\n\nimport axios from 'axios';\nimport Flickity from 'flickity';\nconst galleryContainer = document.querySelector('.default-display_gallery');\nconst photosUrl = `https://image.tmdb.org/t/p/original/`\n\nlet queryPage = 1;\n// document.querySelector('.dot').style.visibility='hidden'\n\nconst options = {\n    method: 'GET',\n    headers: {\n      accept: 'application/json',\n      Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxY2ZlZGNlMTYxMzAxYjJjNWMwNWNiODUxMTczNjQ4MSIsIm5iZiI6MTcyNjIzNDc4My44Mjc1MDMsInN1YiI6IjY2ZTQyYjcxOTAxM2ZlODcyMjI0MGMwNyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D5LbIIzpcPuMhunLfXSG8JZnTRPsItrz-_9PCNoELIQ'\n    }\n  };\n\n  const genres = {\n    28: \"Action\",\n    12: \"Adventure\",\n    16: \"Animation\",\n    35: \"Comedy\",\n    80: \"Crime\",\n    99: \"Documentary\",\n    18: \"Drama\",\n    10751: \"Family\",\n    14: \"Fantasy\",\n    36: \"History\",\n    27: \"Horror\",\n    10402: \"Music\",\n    9648: \"Mystery\",\n    10749: \"Romance\",\n    878: \"Science Fiction\",\n    10770: \"TV Movie\",\n    53: \"Thriller\",\n    10752: \"War\",\n    37: \"Western\",\n  };\n\n  let posts = 20;\n  \n  async function galleryDisplay() {\n    try {\n      \n      const datas = await axios.get(`https://api.themoviedb.org/3/trending/movie/day?api_key=1cfedce161301b2c5c05cb8511736481&per_page=${posts}&page=${queryPage}`, options)\n      const results = datas.data.results;\n      let v = Object.values(results)\n    \n      v.forEach(element => {\n        let date = `${element.release_date}`.slice(0, 4);\n        let div = document.createElement('div')\n        const movieGenre = element.genre_ids.map((id) => genres[id] || \"Unknown\").join(\", \");\n        div.innerHTML = `\n        <img src=\"${photosUrl}${element.poster_path}\" class=\"galleryContainer_image\" alt=\"${element.title} photo\">\n        <h2 class=\"galleryContainer_title\">${element.title}</h2>\n        <p class=\"galleryContainer_subtitle\">${movieGenre} | ${date}</p>\n        `;\n      \n        galleryContainer.appendChild(div);\n        div.classList.add(`galleryContainer_card`)\n  })}\n  catch (error) {\n  console.log(error.message)}\n};\n\ngalleryDisplay()\n  \n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  const paginationDiv =  \n  document.getElementById(\"pagination\"); \n  const itemsPerPage = 1; \n  let totalItems = 1000;\n\n  function generateContent(page) { \n    document.querySelector(`.default-display_gallery`).innerHTML='';\n        \n    for (let i = (page - 1) * itemsPerPage + 1; \n      i <= page * itemsPerPage; i++) { \n      galleryDisplay() \n      } \n    } \n  \n    function generatePagination() {\n      const totalPages = Math.ceil(totalItems / itemsPerPage); \n      paginationDiv.innerHTML = \"\";\n      const prevArrow = document.createElement(\"span\"); \n      prevArrow.className = \"arrow\"; \n      prevArrow.textContent = \"←\"; \n      prevArrow.addEventListener(\"click\", function () { \n        \n        if (queryPage > 1) {     \n          queryPage--; \n          generatePagination();\n          generateContent(queryPage);    \n        } \n        });  \n        \n        paginationDiv.appendChild(prevArrow); \n        \n        let maxValue = Math.max(totalPages);\n        \n        for (let i = 1; i <= totalPages; i++) {     \n          const link = document.createElement(\"a\");\n          link.href = \"#\"; \n          link.textContent = [i];\n          if (link.textContent > queryPage + 3 || link.textContent < queryPage - 4) {\n              link.classList.add('hidden')\n\n              }  \n          if (i >= queryPage + 2  ) {\n                let dots = document.createElement(\"p\");\n                dots.textContent = `• • •`;\n                dots.classList.add('dots')\n               link.textContent= [i] + '\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0'  + dots.textContent;\n               if ( i > 999 ) {\n                link.classList.remove('hidden')\n                link.textContent = '1000'\n                \n              }\n                }\n          \n          link.addEventListener('click', pagination()) \n          function pagination(){\n        \n          if (i === queryPage) { \n            link.classList.add(\"active\"); }\n        \n          }\n              \n              // document.querySelector('.dot').style.visibility='visible'\n\n          link.addEventListener(\"click\", function () {  \n            queryPage = i; \n            generateContent(queryPage); \n            generatePagination(); \n          }); \n  \n          paginationDiv.appendChild(link); \n        } \n        \n    \n\n        const nextArrow = document.createElement(\"span\"); \n        nextArrow.className = \"arrow\"; \n        nextArrow.textContent = \"→\"; \n        nextArrow.addEventListener(\"click\", function () { \n            if (queryPage < totalPages) {\n                queryPage++\n                generateContent(queryPage);  \n                generatePagination(); \n            } \n           \n        }); \n        paginationDiv.appendChild(nextArrow); \n    } \n   \n    generatePagination(); \n});\n\n"],"names":["galleryContainer","photosUrl","queryPage","options","genres","posts","galleryDisplay","results","axios","element","date","div","movieGenre","id","error","paginationDiv","itemsPerPage","totalItems","generateContent","page","generatePagination","totalPages","prevArrow","i","pagination","link","dots","nextArrow"],"mappings":"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"}