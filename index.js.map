{"version":3,"file":"index.js","sources":["../src/js/search.js","../src/js/movies-default-display.js","../src/index.html?html-proxy&index=5.js"],"sourcesContent":["import axios from 'axios';\nimport { openModal } from './modal-movie.js';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const API_KEY = '1cfedce161301b2c5c05cb8511736481';\n  const BASE_URL = 'https://api.themoviedb.org/3';\n\n  const genres = {\n    28: 'Action',\n    12: 'Adventure',\n    16: 'Animation',\n    35: 'Comedy',\n    80: 'Crime',\n    99: 'Documentary',\n    18: 'Drama',\n    10751: 'Family',\n    14: 'Fantasy',\n    36: 'History',\n    27: 'Horror',\n    10402: 'Music',\n    9648: 'Mystery',\n    10749: 'Romance',\n    878: 'Science Fiction',\n    10770: 'TV Movie',\n    53: 'Thriller',\n    10752: 'War',\n    37: 'Western',\n  };\n\n  // Elemente DOM\n  const searchInput = document.getElementById('search-input');\n  const searchButton = document.getElementById('search-button');\n  const movieGrid = document.getElementById('movie-grid');\n  const defaultGallery = document.getElementById('default-display_gallery');\n  const loadingIndicator = document.getElementById('loading-indicator');\n\n  if (!movieGrid) {\n    console.error('Elementul movie-grid nu a fost găsit!');\n    return;\n  }\n\n  searchButton.addEventListener('click', event => {\n    event.preventDefault();\n    const query = searchInput.value.trim();\n    if (query) {\n      searchMovies(query);\n    } else {\n      showDefaultGallery();\n    }\n  });\n\n  searchInput.addEventListener('input', () => {\n    const query = searchInput.value.trim();\n    if (!query) {\n      showDefaultGallery();\n      clearMovieGrid();\n    } else {\n      hideDefaultGallery();\n    }\n  });\n\n  function searchMovies(query) {\n    showLoading();\n    axios\n      .get(\n        `${BASE_URL}/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(\n          query\n        )}`\n      )\n      .then(response => {\n        const movies = filterAndSortMovies(response.data.results);\n        displayMovies(movies);\n      })\n      .catch(error => {\n        console.error('Eroare la preluarea filmelor:', error);\n        showErrorMessage(\n          'A apărut o eroare în timpul căutării. Încercați din nou.'\n        );\n      })\n      .finally(hideLoading);\n  }\n\n  function filterAndSortMovies(movies) {\n    return movies\n      .filter(movie => movie.popularity && movie.release_date)\n      .sort(\n        (a, b) =>\n          b.popularity - a.popularity ||\n          new Date(b.release_date) - new Date(a.release_date)\n      );\n  }\n\n  function displayMovies(movies) {\n    clearMovieGrid();\n\n    if (movies.length === 0) {\n      movieGrid.innerHTML = '<p>Niciun film găsit.</p>';\n      return;\n    }\n\n    movies.forEach(movie => {\n      if (!movie.poster_path) return;\n\n      const movieCard = createMovieCard(movie);\n      movieGrid.appendChild(movieCard);\n\n      // Adăugăm eveniment de click pe fiecare card de film pentru a deschide modalul\n      movieCard.addEventListener('click', () => {\n        openModal(\n          `https://image.tmdb.org/t/p/original${movie.poster_path}`,\n          movie.title,\n          movie.genre_ids.map(id => genres[id] || 'Unknown').join(', '),\n          movie.overview,\n          null,\n          movie.vote_average,\n          movie.vote_count,\n          movie.popularity\n        );\n      });\n    });\n  }\n\n  function createMovieCard(movie) {\n    const movieCard = document.createElement('div');\n    movieCard.classList.add('galleryContainer_card');\n\n    const posterUrl = `https://image.tmdb.org/t/p/original${movie.poster_path}`;\n    const title = movie.title;\n    const movieGenres = movie.genre_ids\n      .map(id => genres[id] || 'Unknown')\n      .join(', ');\n\n    movieCard.innerHTML = `\n      <img class=\"galleryContainer_image\" src=\"${posterUrl}\" alt=\"${title}\" style=\"max-width: 100%; height: auto;>\n      <h3 class=\"galleryContainer_title\">${title}</h3>\n      <h3 class=\"galleryContainer_subtitle\"> ${movieGenres}</h3>\n    `;\n\n    return movieCard;\n  }\n\n  function showDefaultGallery() {\n    defaultGallery.style.display = 'block';\n  }\n\n  function hideDefaultGallery() {\n    defaultGallery.style.display = 'none';\n  }\n\n  function clearMovieGrid() {\n    movieGrid.innerHTML = '';\n  }\n\n  function showErrorMessage(message) {\n    clearMovieGrid();\n    movieGrid.innerHTML = `<p class=\"error-message\">${message}</p>`;\n  }\n\n  function showLoading() {\n    if (loadingIndicator) {\n      loadingIndicator.style.display = 'block';\n    }\n  }\n\n  function hideLoading() {\n    if (loadingIndicator) {\n      loadingIndicator.style.display = 'none';\n    }\n  }\n});\n","'use strict';\nimport axios from 'axios';\nimport { openModal } from './modal-movie.js';\n\nconst galleryContainer = document.querySelector('.default-display_gallery');\nconst photosUrl = `https://image.tmdb.org/t/p/original/`;\nlet currentPage = 1;\nconst totalPages = 50;\n\nconst options = {\n  method: 'GET',\n  headers: {\n    accept: 'application/json',\n    Authorization:\n      'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxY2ZlZGNlMTYxMzAxYjJjNWMwNWNiODUxMTczNjQ4MSIsIm5iZiI6MTcyNjIzNDc4My44Mjc1MDMsInN1YiI6IjY2ZTQyYjcxOTAxM2ZlODcyMjI0MGMwNyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D5LbIIzpcPuMhunLfXSG8JZnTRPsItrz-_9PCNoELIQ',\n  },\n};\n\nconst genres = {\n  28: 'Acțiune',\n  12: 'Aventură',\n  16: 'Animație',\n  35: 'Comedie',\n  80: 'Crimă',\n  99: 'Documentar',\n  18: 'Dramă',\n  10751: 'Familie',\n  14: 'Fantezie',\n  36: 'Istorie',\n  27: 'Horror',\n  10402: 'Muzică',\n  9648: 'Mister',\n  10749: 'Romantic',\n  878: 'SF',\n  10770: 'Film TV',\n  53: 'Thriller',\n  10752: 'Război',\n  37: 'Western',\n};\n\nasync function getMovieTrailer(movieId) {\n  try {\n    const response = await axios.get(\n      `https://api.themoviedb.org/3/movie/${movieId}/videos?api_key=1cfedce161301b2c5c05cb8511736481`,\n      options\n    );\n    const videos = response.data.results;\n\n    const trailer = videos.find(video => video.type === 'Trailer');\n    if (trailer) {\n      return trailer.site === 'YouTube'\n        ? `https://www.youtube.com/embed/${trailer.key}?autoplay=1&controls=0&modestbranding=1&rel=0`\n        : `https://player.vimeo.com/video/${trailer.key}?autoplay=1`;\n    }\n    return null;\n  } catch (error) {\n    console.error('Eroare la preluarea trailerului:', error);\n    return null;\n  }\n}\n\nasync function displayMovies(page = 1) {\n  if (!galleryContainer) {\n    console.error('Elementul container al galeriei nu a fost găsit!');\n    return;\n  }\n\n  galleryContainer.innerHTML = '';\n\n  try {\n    const response = await axios.get(\n      `https://api.themoviedb.org/3/trending/movie/day?api_key=1cfedce161301b2c5c05cb8511736481&page=${page}`,\n      options\n    );\n    const results = response.data.results;\n\n    if (!results || !Array.isArray(results)) {\n      console.error('Format de răspuns API invalid:', response.data);\n      return;\n    }\n\n    results.forEach(async element => {\n      const date = element.release_date\n        ? element.release_date.slice(0, 4)\n        : 'Data necunoscută';\n      const movieGenre = element.genre_ids\n        .map(id => genres[id] || 'Necunoscut')\n        .join(', ');\n      const posterUrl = element.poster_path\n        ? `${photosUrl}${element.poster_path}`\n        : 'cale_catre_imagine_de_rezerva.jpg';\n      const movieDescription = element.overview || 'Descriere indisponibilă';\n      const rating = element.vote_average;\n      const voteCount = element.vote_count;\n      const popularity = element.popularity;\n\n      const trailerUrl = await getMovieTrailer(element.id);\n\n      let div = document.createElement('div');\n      div.classList.add('gallery-card-modal');\n\n      div.innerHTML = `\n        <img src=\"${posterUrl}\" class=\"galleryContainer_image\" alt=\"${element.title} photo\">\n        <h2 class=\"galleryContainer_title\">${element.title}</h2>\n        <p class=\"galleryContainer_subtitle\">${movieGenre} | ${date}</p>\n      `;\n\n      div.addEventListener('click', function () {\n        openModal(\n          posterUrl,\n          element.title,\n          movieGenre,\n          movieDescription,\n          trailerUrl,\n          rating,\n          voteCount,\n          popularity\n        );\n      });\n\n      galleryContainer.appendChild(div);\n      div.classList.add('galleryContainer_card');\n    });\n  } catch (error) {\n    console.error(\n      'Eroare la preluarea filmelor:',\n      error.response ? error.response.data : error.message\n    );\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  displayMovies(currentPage); // Afișăm filmele inițial\n});\n","\n      import { initializeApp } from 'firebase/app';\n      import { getAuth, onAuthStateChanged } from 'firebase/auth';\n\n      // Configurația Firebase\n      const firebaseConfig = {\n        apiKey: 'AIzaSyCw7VkecxwaMQ6UI5ymBFqf54FHRi8_Fkc',\n        authDomain: 'filmoteka-ef771.firebaseapp.com',\n        projectId: 'filmoteka-ef771',\n        storageBucket: 'filmoteka-ef771.appspot.com',\n        messagingSenderId: '731162565659',\n        appId: '1:731162565659:web:da75ae92afc254876bacbe',\n        measurementId: 'G-13YE8DDH34',\n      };\n\n      // Inițializează aplicația Firebase\n      const app = initializeApp(firebaseConfig);\n      const auth = getAuth(app);\n\n      // Verifică dacă utilizatorul este autentificat\n      onAuthStateChanged(auth, user => {\n        if (!user) {\n          // Dacă nu este autentificat, redirecționează la pagina de logare\n          window.location.href = '/echipa-2/page-3.html';\n        }\n      });\n    "],"names":["API_KEY","BASE_URL","genres","searchInput","searchButton","movieGrid","defaultGallery","loadingIndicator","event","query","searchMovies","showDefaultGallery","hideDefaultGallery","clearMovieGrid","showLoading","axios","response","movies","filterAndSortMovies","displayMovies","error","showErrorMessage","hideLoading","movie","a","b","movieCard","createMovieCard","openModal","id","posterUrl","title","movieGenres","message","galleryContainer","photosUrl","currentPage","options","getMovieTrailer","movieId","trailer","video","page","results","element","date","movieGenre","movieDescription","rating","voteCount","popularity","trailerUrl","div","firebaseConfig","app","initializeApp","auth","getAuth","onAuthStateChanged","user"],"mappings":"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"}