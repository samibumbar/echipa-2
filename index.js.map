{"version":3,"file":"index.js","sources":["../src/js/movies-default-display.js"],"sourcesContent":["'use strict';\nimport axios from 'axios';\nimport { openModal } from './modal-movie.js';\n\nconst galleryContainer = document.querySelector('.default-display_gallery');\nconst photosUrl = `https://image.tmdb.org/t/p/original/`;\nlet currentPage = 1;\nconst totalPages = 50; // Exemplu pentru pagini multiple\n\nconst options = {\n  method: 'GET',\n  headers: {\n    accept: 'application/json',\n    Authorization:\n      'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxY2ZlZGNlMTYxMzAxYjJjNWMwNWNiODUxMTczNjQ4MSIsIm5iZiI6MTcyNjIzNDc4My44Mjc1MDMsInN1YiI6IjY2ZTQyYjcxOTAxM2ZlODcyMjI0MGMwNyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D5LbIIzpcPuMhunLfXSG8JZnTRPsItrz-_9PCNoELIQ',\n  },\n};\n\n// Adăugăm maparea genurilor\nconst genres = {\n  28: 'Acțiune',\n  12: 'Aventură',\n  16: 'Animație',\n  35: 'Comedie',\n  80: 'Crimă',\n  99: 'Documentar',\n  18: 'Dramă',\n  10751: 'Familie',\n  14: 'Fantezie',\n  36: 'Istorie',\n  27: 'Horror',\n  10402: 'Muzică',\n  9648: 'Mister',\n  10749: 'Romantic',\n  878: 'SF',\n  10770: 'Film TV',\n  53: 'Thriller',\n  10752: 'Război',\n  37: 'Western',\n};\n\n// Funcție pentru obținerea trailerului din API-ul TMDb\nasync function getMovieTrailer(movieId) {\n  try {\n    const response = await axios.get(\n      `https://api.themoviedb.org/3/movie/${movieId}/videos?api_key=1cfedce161301b2c5c05cb8511736481`,\n      options\n    );\n    const videos = response.data.results;\n\n    const trailer = videos.find(video => video.type === 'Trailer');\n    if (trailer) {\n      return trailer.site === 'YouTube'\n        ? `https://www.youtube.com/embed/${trailer.key}?autoplay=1&controls=0&modestbranding=1&rel=0`\n        : `https://player.vimeo.com/video/${trailer.key}?autoplay=1`;\n    }\n    return null;\n  } catch (error) {\n    console.error('Eroare la preluarea trailerului:', error);\n    return null;\n  }\n}\n\n// Funcție pentru afișarea filmelor din API\nasync function displayMovies(page = 1) {\n  if (!galleryContainer) {\n    console.error('Elementul container al galeriei nu a fost găsit!');\n    return;\n  }\n\n  galleryContainer.innerHTML = ''; // Golește galeria înainte de afișare\n\n  try {\n    const response = await axios.get(\n      `https://api.themoviedb.org/3/trending/movie/day?api_key=1cfedce161301b2c5c05cb8511736481&page=${page}`,\n      options\n    );\n    const results = response.data.results;\n\n    if (!results || !Array.isArray(results)) {\n      console.error('Format de răspuns API invalid:', response.data);\n      return;\n    }\n\n    results.forEach(async element => {\n      const date = element.release_date\n        ? element.release_date.slice(0, 4)\n        : 'Data necunoscută';\n      const movieGenre = element.genre_ids\n        .map(id => genres[id] || 'Necunoscut')\n        .join(', ');\n      const posterUrl = element.poster_path\n        ? `${photosUrl}${element.poster_path}`\n        : 'cale_catre_imagine_de_rezerva.jpg';\n      const movieDescription = element.overview || 'Descriere indisponibilă';\n      const rating = element.vote_average;\n      const voteCount = element.vote_count;\n      const popularity = element.popularity;\n\n      const trailerUrl = await getMovieTrailer(element.id);\n\n      let div = document.createElement('div');\n      div.classList.add('gallery-card-modal');\n\n      div.innerHTML = `\n        <img src=\"${posterUrl}\" class=\"galleryContainer_image\" alt=\"${element.title} photo\">\n        <h2 class=\"galleryContainer_title\">${element.title}</h2>\n        <p class=\"galleryContainer_subtitle\">${movieGenre} | ${date}</p>\n      `;\n\n      div.addEventListener('click', function () {\n        openModal(\n          posterUrl,\n          element.title,\n          movieGenre,\n          movieDescription,\n          trailerUrl,\n          rating,\n          voteCount,\n          popularity\n        );\n      });\n\n      galleryContainer.appendChild(div);\n      div.classList.add('galleryContainer_card');\n    });\n  } catch (error) {\n    console.error(\n      'Eroare la preluarea filmelor:',\n      error.response ? error.response.data : error.message\n    );\n  }\n}\n\n// Generează paginarea și afișează filmele inițial\ndocument.addEventListener('DOMContentLoaded', function () {\n  displayMovies(currentPage); // Afișăm filmele inițial\n});\n"],"names":["galleryContainer","photosUrl","currentPage","options","genres","getMovieTrailer","movieId","trailer","axios","video","error","displayMovies","page","response","results","element","date","movieGenre","id","posterUrl","movieDescription","rating","voteCount","popularity","trailerUrl","div","openModal"],"mappings":"kIAIA,MAAMA,EAAmB,SAAS,cAAc,0BAA0B,EACpEC,EAAY,uCAClB,IAAIC,EAAc,EAGlB,MAAMC,EAAU,CACd,OAAQ,MACR,QAAS,CACP,OAAQ,mBACR,cACE,4PACH,CACH,EAGMC,EAAS,CACb,GAAI,UACJ,GAAI,WACJ,GAAI,WACJ,GAAI,UACJ,GAAI,QACJ,GAAI,aACJ,GAAI,QACJ,MAAO,UACP,GAAI,WACJ,GAAI,UACJ,GAAI,SACJ,MAAO,SACP,KAAM,SACN,MAAO,WACP,IAAK,KACL,MAAO,UACP,GAAI,WACJ,MAAO,SACP,GAAI,SACN,EAGA,eAAeC,EAAgBC,EAAS,CACtC,GAAI,CAOF,MAAMC,GANW,MAAMC,EAAM,IAC3B,sCAAsCF,CAAO,mDAC7CH,CACN,GAC4B,KAAK,QAEN,KAAKM,GAASA,EAAM,OAAS,SAAS,EAC7D,OAAIF,EACKA,EAAQ,OAAS,UACpB,iCAAiCA,EAAQ,GAAG,gDAC5C,kCAAkCA,EAAQ,GAAG,cAE5C,IACR,OAAQG,EAAO,CACd,eAAQ,MAAM,mCAAoCA,CAAK,EAChD,IACR,CACH,CAGA,eAAeC,EAAcC,EAAO,EAAG,CACrC,GAAI,CAACZ,EAAkB,CACrB,QAAQ,MAAM,kDAAkD,EAChE,MACD,CAEDA,EAAiB,UAAY,GAE7B,GAAI,CACF,MAAMa,EAAW,MAAML,EAAM,IAC3B,iGAAiGI,CAAI,GACrGT,CACN,EACUW,EAAUD,EAAS,KAAK,QAE9B,GAAI,CAACC,GAAW,CAAC,MAAM,QAAQA,CAAO,EAAG,CACvC,QAAQ,MAAM,iCAAkCD,EAAS,IAAI,EAC7D,MACD,CAEDC,EAAQ,QAAQ,MAAMC,GAAW,CAC/B,MAAMC,EAAOD,EAAQ,aACjBA,EAAQ,aAAa,MAAM,EAAG,CAAC,EAC/B,mBACEE,EAAaF,EAAQ,UACxB,IAAIG,GAAMd,EAAOc,CAAE,GAAK,YAAY,EACpC,KAAK,IAAI,EACNC,EAAYJ,EAAQ,YACtB,GAAGd,CAAS,GAAGc,EAAQ,WAAW,GAClC,oCACEK,EAAmBL,EAAQ,UAAY,0BACvCM,EAASN,EAAQ,aACjBO,EAAYP,EAAQ,WACpBQ,EAAaR,EAAQ,WAErBS,EAAa,MAAMnB,EAAgBU,EAAQ,EAAE,EAEnD,IAAIU,EAAM,SAAS,cAAc,KAAK,EACtCA,EAAI,UAAU,IAAI,oBAAoB,EAEtCA,EAAI,UAAY;AAAA,oBACFN,CAAS,yCAAyCJ,EAAQ,KAAK;AAAA,6CACtCA,EAAQ,KAAK;AAAA,+CACXE,CAAU,MAAMD,CAAI;AAAA,QAG7DS,EAAI,iBAAiB,QAAS,UAAY,CACxCC,EACEP,EACAJ,EAAQ,MACRE,EACAG,EACAI,EACAH,EACAC,EACAC,CACV,CACA,CAAO,EAEDvB,EAAiB,YAAYyB,CAAG,EAChCA,EAAI,UAAU,IAAI,uBAAuB,CAC/C,CAAK,CACF,OAAQf,EAAO,CACd,QAAQ,MACN,gCACAA,EAAM,SAAWA,EAAM,SAAS,KAAOA,EAAM,OACnD,CACG,CACH,CAGA,SAAS,iBAAiB,mBAAoB,UAAY,CACxDC,EAAcT,CAAW,CAC3B,CAAC"}