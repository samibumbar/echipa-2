{"version":3,"file":"modal-movie-BMDh4blJ.js","sources":["../../src/js/modal-movie.js"],"sourcesContent":["import Swal from 'sweetalert2';\n\nexport function openModal(\n  posterUrl,\n  title,\n  movieGenre,\n  description,\n  trailerUrl = null,\n  rating = null,\n  voteCount = null,\n  popularity = null,\n  isFromWatched = false,\n  isFromQueue = false,\n  movieCardElement = null\n) {\n  const modal = document.getElementById('movieModal');\n  const modalPoster = document.getElementById('modal-poster');\n  const modalTitle = document.getElementById('modal-title');\n  const modalGenres = document.getElementById('modal-genres');\n  const modalDescription = document.getElementById('modal-description');\n  const modalRating = document.getElementById('modal-rating');\n  const modalVotes = document.getElementById('modal-votes');\n  const modalPopularity = document.getElementById('modal-popularity');\n  const watchedButton = document.getElementById('add-to-watched');\n  const queueButton = document.getElementById('add-to-queue');\n\n  if (\n    !modal ||\n    !modalPoster ||\n    !modalTitle ||\n    !modalGenres ||\n    !modalDescription ||\n    !modalRating ||\n    !modalVotes ||\n    !modalPopularity ||\n    !watchedButton ||\n    !queueButton\n  ) {\n    console.error('Modal elements not found.');\n    return;\n  }\n\n  // Setăm conținutul în modal\n  modalTitle.textContent = title;\n  modalGenres.textContent = `Genres: ${movieGenre}`;\n  modalDescription.textContent = description;\n  modalRating.textContent = rating ? `Rating: ${rating}` : 'Rating unavailable';\n  modalVotes.textContent = voteCount\n    ? `${voteCount} votes`\n    : 'Votes unavailable';\n  modalPopularity.textContent = popularity\n    ? `Popularity: ${popularity}`\n    : 'Popularity unavailable';\n\n  if (trailerUrl) {\n    modalPoster.outerHTML = `<iframe id=\"modal-trailer\" width=\"100%\" height=\"315\" src=\"${trailerUrl}\" \n      frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen></iframe>`;\n  } else {\n    modalPoster.src = posterUrl;\n  }\n\n  modal.classList.remove('is-hidden');\n  modal.classList.add('is-visible');\n\n  if (isFromWatched) {\n    watchedButton.textContent = 'Remove from WATCHED';\n    watchedButton.onclick = () => {\n      removeFromLocalStorage('watchedMovies', title);\n      if (movieCardElement) movieCardElement.remove();\n      Swal.fire(`${title} has been removed from WATCHED!`).then(() => {\n        closeModal();\n      });\n    };\n  } else if (isFromQueue) {\n    queueButton.textContent = 'Remove from QUEUE';\n    queueButton.onclick = () => {\n      removeFromLocalStorage('queueMovies', title);\n      if (movieCardElement) movieCardElement.remove();\n      Swal.fire(`${title} has been removed from QUEUE!`).then(() => {\n        closeModal();\n      });\n    };\n  } else {\n    watchedButton.textContent = 'Add to WATCHED';\n    watchedButton.onclick = () => {\n      saveToLocalStorage('watchedMovies', {\n        title,\n        posterUrl,\n        movieGenre,\n        description,\n      });\n      Swal.fire(`${title} has been added to WATCHED!`);\n    };\n\n    queueButton.textContent = 'Add to QUEUE';\n    queueButton.onclick = () => {\n      saveToLocalStorage('queueMovies', {\n        title,\n        posterUrl,\n        movieGenre,\n        description,\n      });\n      Swal.fire(`${title} has been added to QUEUE!`);\n    };\n  }\n\n  document.addEventListener('keydown', handleEscapeKey);\n}\n\nexport function closeModal() {\n  const modal = document.getElementById('movieModal');\n  const modalTrailer = document.getElementById('modal-trailer');\n\n  if (modalTrailer) {\n    modalTrailer.remove();\n    const modalWrapper = document.querySelector('.wrapper-item');\n    modalWrapper.innerHTML = `<img id=\"modal-poster\" src=\"\" alt=\"Movie Poster\" />`;\n  }\n\n  modal.classList.remove('is-visible');\n  modal.classList.add('is-hidden');\n\n  document.removeEventListener('keydown', handleEscapeKey);\n}\n\nfunction saveToLocalStorage(key, movie) {\n  const storedMovies = JSON.parse(localStorage.getItem(key)) || [];\n  if (!storedMovies.find(storedMovie => storedMovie.title === movie.title)) {\n    storedMovies.push(movie);\n    localStorage.setItem(key, JSON.stringify(storedMovies));\n  }\n}\n\nfunction removeFromLocalStorage(key, movieTitle) {\n  const storedMovies = JSON.parse(localStorage.getItem(key)) || [];\n  const updatedMovies = storedMovies.filter(\n    movie => movie.title !== movieTitle\n  );\n  localStorage.setItem(key, JSON.stringify(updatedMovies));\n}\n\nfunction handleEscapeKey(event) {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  document\n    .getElementById('close-modal-btn')\n    .addEventListener('click', closeModal);\n});\n"],"names":["openModal","posterUrl","title","movieGenre","description","trailerUrl","rating","voteCount","popularity","isFromWatched","isFromQueue","movieCardElement","modal","modalPoster","modalTitle","modalGenres","modalDescription","modalRating","modalVotes","modalPopularity","watchedButton","queueButton","removeFromLocalStorage","Swal","closeModal","saveToLocalStorage","handleEscapeKey","modalTrailer","modalWrapper","key","movie","storedMovies","storedMovie","movieTitle","updatedMovies","event"],"mappings":"+uBAEO,SAASA,EACdC,EACAC,EACAC,EACAC,EACAC,EAAa,KACbC,EAAS,KACTC,EAAY,KACZC,EAAa,KACbC,EAAgB,GAChBC,EAAc,GACdC,EAAmB,KACnB,CACA,MAAMC,EAAQ,SAAS,eAAe,YAAY,EAC5CC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAmB,SAAS,eAAe,mBAAmB,EAC9DC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAkB,SAAS,eAAe,kBAAkB,EAC5DC,EAAgB,SAAS,eAAe,gBAAgB,EACxDC,EAAc,SAAS,eAAe,cAAc,EAE1D,GACE,CAACT,GACD,CAACC,GACD,CAACC,GACD,CAACC,GACD,CAACC,GACD,CAACC,GACD,CAACC,GACD,CAACC,GACD,CAACC,GACD,CAACC,EACD,CACA,QAAQ,MAAM,2BAA2B,EACzC,MACD,CAGDP,EAAW,YAAcZ,EACzBa,EAAY,YAAc,WAAWZ,CAAU,GAC/Ca,EAAiB,YAAcZ,EAC/Ba,EAAY,YAAcX,EAAS,WAAWA,CAAM,GAAK,qBACzDY,EAAW,YAAcX,EACrB,GAAGA,CAAS,SACZ,oBACJY,EAAgB,YAAcX,EAC1B,eAAeA,CAAU,GACzB,yBAEAH,EACFQ,EAAY,UAAY,6DAA6DR,CAAU;AAAA,mFAG/FQ,EAAY,IAAMZ,EAGpBW,EAAM,UAAU,OAAO,WAAW,EAClCA,EAAM,UAAU,IAAI,YAAY,EAE5BH,GACFW,EAAc,YAAc,sBAC5BA,EAAc,QAAU,IAAM,CAC5BE,EAAuB,gBAAiBpB,CAAK,EACzCS,GAAkBA,EAAiB,SACvCY,EAAK,KAAK,GAAGrB,CAAK,iCAAiC,EAAE,KAAK,IAAM,CAC9DsB,GACR,CAAO,CACP,GACad,GACTW,EAAY,YAAc,oBAC1BA,EAAY,QAAU,IAAM,CAC1BC,EAAuB,cAAepB,CAAK,EACvCS,GAAkBA,EAAiB,SACvCY,EAAK,KAAK,GAAGrB,CAAK,+BAA+B,EAAE,KAAK,IAAM,CAC5DsB,GACR,CAAO,CACP,IAEIJ,EAAc,YAAc,iBAC5BA,EAAc,QAAU,IAAM,CAC5BK,EAAmB,gBAAiB,CAClC,MAAAvB,EACA,UAAAD,EACA,WAAAE,EACA,YAAAC,CACR,CAAO,EACDmB,EAAK,KAAK,GAAGrB,CAAK,6BAA6B,CACrD,EAEImB,EAAY,YAAc,eAC1BA,EAAY,QAAU,IAAM,CAC1BI,EAAmB,cAAe,CAChC,MAAAvB,EACA,UAAAD,EACA,WAAAE,EACA,YAAAC,CACR,CAAO,EACDmB,EAAK,KAAK,GAAGrB,CAAK,2BAA2B,CACnD,GAGE,SAAS,iBAAiB,UAAWwB,CAAe,CACtD,CAEO,SAASF,GAAa,CAC3B,MAAMZ,EAAQ,SAAS,eAAe,YAAY,EAC5Ce,EAAe,SAAS,eAAe,eAAe,EAE5D,GAAIA,EAAc,CAChBA,EAAa,OAAM,EACnB,MAAMC,EAAe,SAAS,cAAc,eAAe,EAC3DA,EAAa,UAAY,qDAC1B,CAEDhB,EAAM,UAAU,OAAO,YAAY,EACnCA,EAAM,UAAU,IAAI,WAAW,EAE/B,SAAS,oBAAoB,UAAWc,CAAe,CACzD,CAEA,SAASD,EAAmBI,EAAKC,EAAO,CACtC,MAAMC,EAAe,KAAK,MAAM,aAAa,QAAQF,CAAG,CAAC,GAAK,GACzDE,EAAa,KAAKC,GAAeA,EAAY,QAAUF,EAAM,KAAK,IACrEC,EAAa,KAAKD,CAAK,EACvB,aAAa,QAAQD,EAAK,KAAK,UAAUE,CAAY,CAAC,EAE1D,CAEA,SAAST,EAAuBO,EAAKI,EAAY,CAE/C,MAAMC,GADe,KAAK,MAAM,aAAa,QAAQL,CAAG,CAAC,GAAK,IAC3B,OACjCC,GAASA,EAAM,QAAUG,CAC7B,EACE,aAAa,QAAQJ,EAAK,KAAK,UAAUK,CAAa,CAAC,CACzD,CAEA,SAASR,EAAgBS,EAAO,CAC1BA,EAAM,MAAQ,UAChBX,GAEJ,CAEA,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,SACG,eAAe,iBAAiB,EAChC,iBAAiB,QAASA,CAAU,CACzC,CAAC"}