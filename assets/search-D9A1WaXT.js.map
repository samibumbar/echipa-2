{"version":3,"file":"search-D9A1WaXT.js","sources":["../../src/js/search.js"],"sourcesContent":["import axios from 'axios';\nimport { openModal } from './modal-movie.js';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const API_KEY = '1cfedce161301b2c5c05cb8511736481';\n  const BASE_URL = 'https://api.themoviedb.org/3';\n\n  const genres = {\n    28: 'Action',\n    12: 'Adventure',\n    16: 'Animation',\n    35: 'Comedy',\n    80: 'Crime',\n    99: 'Documentary',\n    18: 'Drama',\n    10751: 'Family',\n    14: 'Fantasy',\n    36: 'History',\n    27: 'Horror',\n    10402: 'Music',\n    9648: 'Mystery',\n    10749: 'Romance',\n    878: 'Science Fiction',\n    10770: 'TV Movie',\n    53: 'Thriller',\n    10752: 'War',\n    37: 'Western',\n  };\n\n  // Elemente DOM\n  const searchInput = document.getElementById('search-input');\n  const searchButton = document.getElementById('search-button');\n  const movieGrid = document.getElementById('movie-grid');\n  const defaultGallery = document.getElementById('default-display_gallery');\n  const loadingIndicator = document.getElementById('loading-indicator');\n\n  if (!movieGrid) {\n    console.error('Elementul movie-grid nu a fost găsit!');\n    return;\n  }\n\n  searchButton.addEventListener('click', event => {\n    event.preventDefault();\n    const query = searchInput.value.trim();\n    if (query) {\n      searchMovies(query);\n    } else {\n      showDefaultGallery();\n    }\n  });\n\n  searchInput.addEventListener('input', () => {\n    const query = searchInput.value.trim();\n    if (!query) {\n      showDefaultGallery();\n      clearMovieGrid();\n    } else {\n      hideDefaultGallery();\n    }\n  });\n\n  function searchMovies(query) {\n    showLoading();\n    axios\n      .get(\n        `${BASE_URL}/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(\n          query\n        )}`\n      )\n      .then(response => {\n        const movies = filterAndSortMovies(response.data.results);\n        displayMovies(movies);\n      })\n      .catch(error => {\n        console.error('Eroare la preluarea filmelor:', error);\n        showErrorMessage(\n          'A apărut o eroare în timpul căutării. Încercați din nou.'\n        );\n      })\n      .finally(hideLoading);\n  }\n\n  function filterAndSortMovies(movies) {\n    return movies\n      .filter(movie => movie.popularity && movie.release_date)\n      .sort(\n        (a, b) =>\n          b.popularity - a.popularity ||\n          new Date(b.release_date) - new Date(a.release_date)\n      );\n  }\n\n  function displayMovies(movies) {\n    clearMovieGrid();\n\n    if (movies.length === 0) {\n      movieGrid.innerHTML = '<p>Niciun film găsit.</p>';\n      return;\n    }\n\n    movies.forEach(movie => {\n      if (!movie.poster_path) return;\n\n      const movieCard = createMovieCard(movie);\n      movieGrid.appendChild(movieCard);\n\n      // Adăugăm eveniment de click pe fiecare card de film pentru a deschide modalul\n      movieCard.addEventListener('click', () => {\n        openModal(\n          `https://image.tmdb.org/t/p/original${movie.poster_path}`,\n          movie.title,\n          movie.genre_ids.map(id => genres[id] || 'Unknown').join(', '),\n          movie.overview,\n          null,\n          movie.vote_average,\n          movie.vote_count,\n          movie.popularity\n        );\n      });\n    });\n  }\n\n  function createMovieCard(movie) {\n    const movieCard = document.createElement('div');\n    movieCard.classList.add('movie-card');\n\n    const posterUrl = `https://image.tmdb.org/t/p/original${movie.poster_path}`;\n    const title = movie.title;\n    const movieGenres = movie.genre_ids\n      .map(id => genres[id] || 'Unknown')\n      .join(', ');\n\n    movieCard.innerHTML = `\n      <img src=\"${posterUrl}\" alt=\"${title}\" style=\"max-width: 100%; height: auto;\">\n      <h3>${title}</h3>\n      <h3 class=\"span\">Gen: ${movieGenres}</h3>\n    `;\n\n    return movieCard;\n  }\n\n  function showDefaultGallery() {\n    defaultGallery.style.display = 'block';\n  }\n\n  function hideDefaultGallery() {\n    defaultGallery.style.display = 'none';\n  }\n\n  function clearMovieGrid() {\n    movieGrid.innerHTML = '';\n  }\n\n  function showErrorMessage(message) {\n    clearMovieGrid();\n    movieGrid.innerHTML = `<p class=\"error-message\">${message}</p>`;\n  }\n\n  function showLoading() {\n    if (loadingIndicator) {\n      loadingIndicator.style.display = 'block';\n    }\n  }\n\n  function hideLoading() {\n    if (loadingIndicator) {\n      loadingIndicator.style.display = 'none';\n    }\n  }\n});\n"],"names":["API_KEY","BASE_URL","genres","searchInput","searchButton","movieGrid","defaultGallery","loadingIndicator","event","query","searchMovies","showDefaultGallery","hideDefaultGallery","clearMovieGrid","showLoading","axios","response","movies","filterAndSortMovies","displayMovies","error","showErrorMessage","hideLoading","movie","a","b","movieCard","createMovieCard","openModal","id","posterUrl","title","movieGenres","message"],"mappings":"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"}